(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();class h{constructor(){this.allPlayers=[],this.loadScores()}loadScores(){if(typeof window<"u"&&window.localStorage)for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t);if(e.startsWith("player:")){const s=localStorage.getItem(e),n=JSON.parse(s);this.allPlayers.push(n)}}else console.error("localStorage is not available in this environment.")}addPlayer(t,e){const s={name:t,time:e};typeof window<"u"&&window.localStorage?(window.localStorage.setItem(`player:${s.name}`,JSON.stringify(s)),this.allPlayers.push(s)):console.error("localStorage is not available in this environment.")}getHighScores(){return this.allPlayers.sort((e,s)=>e.time-s.time).slice(0,5)}}class u{constructor(){this.rad_con=document.getElementById("radio-container"),this.form=document.getElementById("quizz-form"),this.quizzBox=document.getElementById("quizz-box"),this.questionText=document.getElementById("question-text"),this.timer=document.getElementById("counter"),this.answeInput=document.getElementById("answer"),this.submitButton=document.getElementById("submit-answer"),this.resultBox=document.getElementById("result"),this.resultStatus=document.getElementById("result-status"),this.scoreTable=document.getElementById("table"),this.scoreButton=document.getElementById("show-score"),this.restartButton=document.getElementById("restart"),this.nameBox=document.getElementById("name-box"),this.nameInput=document.getElementById("name-input"),this.lose_img=document.getElementById("lose-image"),this.timeoutHandle=null,this.manger=new h}createtheRaioButtons(t){if(document.querySelectorAll('input[name="radio-button"]').length===0){for(const s in t.alternatives)if(Object.prototype.hasOwnProperty.call(t.alternatives,s)){const n=t.alternatives[s];console.log(s,n);const i=document.createElement("input");i.type="radio",i.id="options",i.name="radio-button",i.value=s;const r=document.createElement("label");r.innerHTML=n,this.rad_con.appendChild(i),this.rad_con.appendChild(r)}}}ShowHightScore(t){const e=document.querySelector("#score-table tbody");e.innerHTML="",t.forEach(s=>{const n=e.insertRow(),i=n.insertCell(0),r=n.insertCell(1);i.textContent=s.name,r.textContent=s.time})}resultCase(t){this.resultBox.classList.remove("hidden"),this.resultStatus.innerText(t),this.scoreButton.classList.remove("hidden"),this.restartButton.classList.remove("hidden"),this.scoreTable.classList.add("hidden")}showTopScores(){this.scoreTable.classList.remove("hidden"),this.scoreButton.classList.add("hidden"),this.ShowHightScore(this.manger.getHighScores())}startCase(){return this.nameBox.classList.remove("hidden"),this.quizzBox.classList.add("hidden"),this.resultBox.classList.add("hidden"),this.nameInput.value}questionCase(t){this.nameBox.classList.add("hidden"),this.quizzBox.classList.remove("hidden"),this.resultBox.classList.add("hidden"),this.questionText.innerText=t.question,t.id===1?this.quizzBox.classList.remove("hidden"):t.id===21?(this.answeInput.classList.add("hidden"),this.submitButton.classList.add("hidden"),this.createtheRaioButtons(t),this.rad_con.classList.remove("hidden"),this.answeInput.classList.add("hidden"),this.submitButton.classList.add("hidden")):t.id===321&&(this.rad_con.classList.add("hidden"),this.answeInput.classList.remove("hidden"),this.submitButton.classList.remove("hidden"))}answerCase(t){if(t[1]===400)return"lose";if(t[1]===200){if(t[0].nextURL)return"continue";if(!t[0].nextURL)return"win"}}WinCase(){this.quizzBox.classList.add("hidden"),this.resultBox.classList.remove("hidden"),this.scoreButton.classList.remove("hidden"),this.restartButton.classList.remove("hidden"),this.scoreTable.classList.add("hidden"),this.clearTimer(),this.resultStatus.innerText="you win !!!"}loseCase(){this.quizzBox.classList.add("hidden"),this.resultBox.classList.remove("hidden"),this.scoreButton.classList.remove("hidden"),this.restartButton.classList.remove("hidden"),this.scoreTable.classList.add("hidden"),this.clearTimer(),this.resultStatus.innerText="yoe lose !!!"}getAnswer(){return this.answeInput.value}clearInput(){this.answeInput.value="",this.nameInput.value=""}countDownTimer(t){clearTimeout(this.timeoutHandle);let e=t;const s=()=>{this.timer.innerHTML=`${e<10?"0":""}${e}`,e--,e>=0?this.timeoutHandle=setTimeout(s,1e3):this.loseCase()};s()}clearTimer(){clearTimeout(this.timeoutHandle)}getTimer(){return parseInt(this.timer.innerHTML)}getRadioButtons(){const t=document.querySelectorAll('input[name="radio-button"]');return Array.from(t)}clearRadioButton(){document.querySelectorAll('input[name="radio-button"]').forEach(e=>{e.checked=!1})}}class y{async get(t){return await(await fetch(t)).json()}async post(t,e=null){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},n=await fetch(t,s);return[await n.json(),n.status]}}class g{#t;#e;constructor(){this.#t="",this.#e=0}set_the_name(t){this.#t=t}get_the_name(){return this.#t}set_the_score(t){this.#e+=t}clear(){this.#e=0}get_the_score(){return this.#e}}class B{#t;#e;#i;#a;#s;#n;#o;constructor(){this.#e=new g,this.#i=new y,this.#t=new u,this.#n=null,this.#o=null,this.#s=null,this.#a=new h}start(){document.getElementById("name-box").classList.remove("hidden")}async startButton(t){const e=this.#t.startCase();this.#e.set_the_name(e),this.#n=await this.#i.get(t),this.#t.questionCase(this.#n),console.log(this.#n.nextURL),this.#o=this.#n.nextURL,this.#t.countDownTimer(10),this.#t.clearInput(),this.#e.set_the_score(0),this.#e.clear()}async action(t){this.#s=await this.#i.post(this.#o,{answer:t}),this.checkTheanswer(this.#s),console.log("Status:",this.#s[1]),this.#n=this.#s[0].nextURL,this.#s=await this.#i.get(this.#n),this.#t.questionCase(this.#s),this.#o=this.#s.nextURL,this.#t.countDownTimer(10),this.#t.clearInput()}async submitButton(){const t=this.#t.getAnswer();await this.action(t)}async radioButton(t){await this.action(t)}checkTheanswer(t){const e=this.#t.getTimer();this.#t.answerCase(t)==="win"?(this.#a.addPlayer(this.#e.get_the_name(),this.#e.get_the_score()),this.#t.WinCase()):this.#t.answerCase(t)==="continue"?(this.#e.set_the_score(10-e),this.#t.questionCase(this.#s)):this.#t.answerCase(t)==="lose"&&this.#t.loseCase()}}const d=document.getElementById("name-input"),p=document.getElementById("submit-name"),w=document.getElementById("answer"),f=document.getElementById("submit-answer"),L=document.getElementById("restart"),v=document.getElementById("show-score"),m="https://courselab.lnu.se/quiz/question/1",c=new B,l=new u;let a=[];l.startCase();d.addEventListener("keypress",async o=>{o.key==="Enter"&&(d.value===""?alert("enter you name or your nickname to start"):(o.preventDefault(),await c.startButton(m)))});p.addEventListener("click",async()=>{d.value===""?alert("enter you name or your nickname to start"):await c.startButton(m)});w.addEventListener("keypress",async o=>{if(o.key==="Enter"){o.preventDefault(),await c.submitButton(),a=l.getRadioButtons(),console.log(a);for(let t=0;t<a.length;t++)console.log("vlue: ",a[t].value),a[t].addEventListener("change",async e=>{const s=e.target.value;console.log(s),c.radioButton(s)})}});f.addEventListener("click",async()=>{await c.submitButton(),a=l.getRadioButtons(),console.log(a);for(let o=0;o<a.length;o++)console.log("vlue: ",a[o].value),a[o].addEventListener("change",async t=>{const e=t.target.value;console.log(e),c.radioButton(e)})});v.addEventListener("click",()=>{l.showTopScores()});L.addEventListener("click",()=>{l.clearInput(),l.clearRadioButton(),l.startCase()});
